{% extends "ocrapp/base.html" %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
{% block content %}
<body class="custom-background">
    <h1>Subir Imagen para TranscripciÃ³n</h1>
    <form method="post" enctype="multipart/form-data" onsubmit="showSpinner()">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" id="submitBtn" class="btn btn-primary mt-2">Subir Imagen</button>
    </form>

    <!-- Spinner -->
    <div id="spinner" class="spinner"></div>

    <!-- Mostrar Imagen y TranscripciÃ³n -->
    {% if image_url %}
    <div class="card p-3 my-4" style="background-color: rgba(255, 255, 255, 0.8); border-radius: 15px;">
        <h2>Imagen Procesada:</h2>
        <img src="{{ image_url }}" width="300" class="img-thumbnail">

        <h2>TranscripciÃ³n:</h2>
        <pre class="transcription-text">{{ transcription_result }}</pre>
    </div>
    {% endif %}

    <a href="{% url 'history' %}" class="btn btn-secondary mt-3">ðŸ“– Ver Historial</a>
</body>
{% endblock %}

{% block extra_scripts %}
<script>
    function showSpinner() {
        document.getElementById('spinner').style.display = 'block';
        document.getElementById('submitBtn').disabled = true;
    }
</script>
{% endblock %}